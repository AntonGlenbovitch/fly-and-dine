<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Inflight Ordering – Architecture (Inline SVG + Details)</title>
  <style>
    :root { color-scheme: light dark; }
    body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 0; padding: 0; }
    header { padding: 28px 24px 12px; background: Canvas; position: sticky; top: 0; z-index: 20; border-bottom: 1px solid rgb(200 200 200 / .25); }
    main { padding: 24px; max-width: 1100px; margin: 0 auto; }
    h1, h2, h3 { line-height: 1.2; margin: 0.2em 0 0.4em; }
    p, li { line-height: 1.6; }
    .diagram-card { background: Canvas; color: CanvasText; border: 1px solid rgb(200 200 200 / .3); border-radius: 16px; padding: 16px; margin-bottom: 28px; }
    .diagram-card svg { width: 100%; height: auto; display: block; }
    .toc { border: 1px solid rgb(200 200 200 / .35); border-radius: 12px; padding: 12px; margin: 12px 0 24px; }
    .two-col { display: grid; grid-template-columns: 1fr; gap: 18px; }
    @media (min-width: 900px) { .two-col { grid-template-columns: 1.2fr 0.8fr; } }
    ul { margin: 0.4em 0 1em 1.3em; }
    code.inline { background: rgb(200 200 200 / .18); padding: 0 0.35em; border-radius: 6px; }
    .muted { opacity: .75; }
    .small { font-size: .92rem; }
  </style>
</head>
<body>
  <header>
    <h1>Inflight Ordering – System Architecture</h1>
    <p class="muted small">Cross‑platform, offline‑first design with robust synchronization and security.</p>
  </header>
  <main>
    <section class="two-col">
      <div>
        <h2>1. Introduction</h2>
        <p>This document details the high-level system architecture for the inflight ordering application, focusing on its modularity, offline capabilities, synchronization mechanisms, and security considerations. The architecture is designed to support cross-platform deployment while maintaining a single, consistent domain logic.</p>
        <h2>2. Architectural Overview</h2>
        <p>The application will follow a layered architecture, separating concerns into distinct modules. This approach promotes maintainability, testability, and scalability. The core domain logic will be implemented in Java, ensuring reusability across different platforms. Platform-specific UI layers will consume this core logic.</p>
      </div>
      <aside class="toc">
        <strong>Contents</strong>
        <ol>
          <li><a href="#intro">Introduction</a></li>
          <li><a href="#overview">Architectural Overview</a></li>
          <li><a href="#key">Key Architectural Components</a></li>
          <li><a href="#flow">Data Flow &amp; Interactions</a></li>
          <li><a href="#stack">Technology Stack</a></li>
          <li><a href="#security">Security Considerations</a></li>
          <li><a href="#offline">Offline‑First Strategy</a></li>
          <li><a href="#cross">Cross‑Platform Strategy</a></li>
        </ol>
      </aside>
    </section>

    <section class="diagram-card" id="diagram">
      <h2>Component Interactions (Inline SVG)</h2>
      <p class="muted small">Edges shown include persistence, synchronization, security, external links, and feedback to UI.</p>
      <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: edges_only Pages: 1 -->
<svg width="1604pt" height="416pt"
 viewBox="0.00 0.00 1604.00 416.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 412)">
<title>edges_only</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-412 1600,-412 1600,4 -4,4"/>
<!-- A1 -->
<g id="node1" class="node">
<title>A1</title>
<path fill="none" stroke="black" d="M69,-186C69,-186 12,-186 12,-186 6,-186 0,-180 0,-174 0,-174 0,-160 0,-160 0,-154 6,-148 12,-148 12,-148 69,-148 69,-148 75,-148 81,-154 81,-160 81,-160 81,-174 81,-174 81,-180 75,-186 69,-186"/>
<text text-anchor="middle" x="40.5" y="-170.8" font-family="Helvetica,sans-Serif" font-size="14.00">Mobile UI</text>
<text text-anchor="middle" x="40.5" y="-155.8" font-family="Helvetica,sans-Serif" font-size="14.00">(Android)</text>
</g>
<!-- A2 -->
<g id="node2" class="node">
<title>A2</title>
<path fill="none" stroke="black" d="M180,-186C180,-186 111,-186 111,-186 105,-186 99,-180 99,-174 99,-174 99,-160 99,-160 99,-154 105,-148 111,-148 111,-148 180,-148 180,-148 186,-148 192,-154 192,-160 192,-160 192,-174 192,-174 192,-180 186,-186 180,-186"/>
<text text-anchor="middle" x="145.5" y="-170.8" font-family="Helvetica,sans-Serif" font-size="14.00">Desktop UI</text>
<text text-anchor="middle" x="145.5" y="-155.8" font-family="Helvetica,sans-Serif" font-size="14.00">(JavaFX)</text>
</g>
<!-- A3 -->
<g id="node3" class="node">
<title>A3</title>
<path fill="none" stroke="black" d="M398.5,-186C398.5,-186 222.5,-186 222.5,-186 216.5,-186 210.5,-180 210.5,-174 210.5,-174 210.5,-160 210.5,-160 210.5,-154 216.5,-148 222.5,-148 222.5,-148 398.5,-148 398.5,-148 404.5,-148 410.5,-154 410.5,-160 410.5,-160 410.5,-174 410.5,-174 410.5,-180 404.5,-186 398.5,-186"/>
<text text-anchor="middle" x="310.5" y="-170.8" font-family="Helvetica,sans-Serif" font-size="14.00">Web UI</text>
<text text-anchor="middle" x="310.5" y="-155.8" font-family="Helvetica,sans-Serif" font-size="14.00">(React Native Web/Vaadin)</text>
</g>
<!-- B1 -->
<g id="node4" class="node">
<title>B1</title>
<path fill="none" stroke="black" d="M602.5,-334C602.5,-334 372.5,-334 372.5,-334 366.5,-334 360.5,-328 360.5,-322 360.5,-322 360.5,-308 360.5,-308 360.5,-302 366.5,-296 372.5,-296 372.5,-296 602.5,-296 602.5,-296 608.5,-296 614.5,-302 614.5,-308 614.5,-308 614.5,-322 614.5,-322 614.5,-328 608.5,-334 602.5,-334"/>
<text text-anchor="middle" x="487.5" y="-318.8" font-family="Helvetica,sans-Serif" font-size="14.00">Core Domain Logic</text>
<text text-anchor="middle" x="487.5" y="-303.8" font-family="Helvetica,sans-Serif" font-size="14.00">(Use Cases: Order/Inventory/Seat)</text>
</g>
<!-- B4 -->
<g id="node5" class="node">
<title>B4</title>
<path fill="none" stroke="black" d="M282,-260C282,-260 175,-260 175,-260 169,-260 163,-254 163,-248 163,-248 163,-234 163,-234 163,-228 169,-222 175,-222 175,-222 282,-222 282,-222 288,-222 294,-228 294,-234 294,-234 294,-248 294,-248 294,-254 288,-260 282,-260"/>
<text text-anchor="middle" x="228.5" y="-244.8" font-family="Helvetica,sans-Serif" font-size="14.00">Domain Events /</text>
<text text-anchor="middle" x="228.5" y="-229.8" font-family="Helvetica,sans-Serif" font-size="14.00">Event Bus</text>
</g>
<!-- B1&#45;&gt;B4 -->
<g id="edge2" class="edge">
<title>B1&#45;&gt;B4</title>
<path fill="none" stroke="black" d="M422.48,-295.92C386.3,-285.87 341.11,-273.31 303.45,-262.84"/>
<polygon fill="black" stroke="black" points="304.12,-259.39 293.55,-260.08 302.25,-266.13 304.12,-259.39"/>
</g>
<!-- P1 -->
<g id="node6" class="node">
<title>P1</title>
<path fill="none" stroke="black" d="M648,-260C648,-260 499,-260 499,-260 493,-260 487,-254 487,-248 487,-248 487,-234 487,-234 487,-228 493,-222 499,-222 499,-222 648,-222 648,-222 654,-222 660,-228 660,-234 660,-234 660,-248 660,-248 660,-254 654,-260 648,-260"/>
<text text-anchor="middle" x="573.5" y="-244.8" font-family="Helvetica,sans-Serif" font-size="14.00">Repositories</text>
<text text-anchor="middle" x="573.5" y="-229.8" font-family="Helvetica,sans-Serif" font-size="14.00">(Order/Inventory/Seat)</text>
</g>
<!-- B1&#45;&gt;P1 -->
<g id="edge1" class="edge">
<title>B1&#45;&gt;P1</title>
<path fill="none" stroke="black" d="M509.2,-295.83C519.69,-287.05 532.45,-276.37 543.82,-266.85"/>
<polygon fill="black" stroke="black" points="546.38,-269.27 551.81,-260.16 541.89,-263.9 546.38,-269.27"/>
</g>
<!-- B4&#45;&gt;A1 -->
<g id="edge20" class="edge">
<title>B4&#45;&gt;A1</title>
<path fill="none" stroke="black" d="M181.06,-221.83C153.52,-211.29 118.85,-198.01 90.84,-187.28"/>
<polygon fill="black" stroke="black" points="91.82,-183.91 81.23,-183.6 89.31,-190.44 91.82,-183.91"/>
</g>
<!-- B4&#45;&gt;A2 -->
<g id="edge21" class="edge">
<title>B4&#45;&gt;A2</title>
<path fill="none" stroke="black" d="M207.56,-221.83C197.43,-213.05 185.12,-202.37 174.15,-192.85"/>
<polygon fill="black" stroke="black" points="176.29,-190.07 166.44,-186.16 171.7,-195.36 176.29,-190.07"/>
</g>
<!-- B4&#45;&gt;A3 -->
<g id="edge22" class="edge">
<title>B4&#45;&gt;A3</title>
<path fill="none" stroke="black" d="M249.19,-221.83C259.19,-213.05 271.36,-202.37 282.2,-192.85"/>
<polygon fill="black" stroke="black" points="284.61,-195.39 289.81,-186.16 279.99,-190.13 284.61,-195.39"/>
</g>
<!-- P2 -->
<g id="node7" class="node">
<title>P2</title>
<path fill="none" stroke="black" d="M762,-186C762,-186 567,-186 567,-186 561,-186 555,-180 555,-174 555,-174 555,-160 555,-160 555,-154 561,-148 567,-148 567,-148 762,-148 762,-148 768,-148 774,-154 774,-160 774,-160 774,-174 774,-174 774,-180 768,-186 762,-186"/>
<text text-anchor="middle" x="664.5" y="-170.8" font-family="Helvetica,sans-Serif" font-size="14.00">Local Data Store</text>
<text text-anchor="middle" x="664.5" y="-155.8" font-family="Helvetica,sans-Serif" font-size="14.00">(Encrypted SQLite/H2/Realm)</text>
</g>
<!-- P1&#45;&gt;P2 -->
<g id="edge3" class="edge">
<title>P1&#45;&gt;P2</title>
<path fill="none" stroke="black" d="M604.56,-215.42C613.94,-208 624.23,-199.86 633.6,-192.45"/>
<polygon fill="black" stroke="black" points="602.13,-212.88 596.46,-221.83 606.48,-218.37 602.13,-212.88"/>
<polygon fill="black" stroke="black" points="635.87,-195.11 641.54,-186.16 631.53,-189.62 635.87,-195.11"/>
</g>
<!-- P3 -->
<g id="node8" class="node">
<title>P3</title>
<path fill="none" stroke="black" d="M939,-186C939,-186 804,-186 804,-186 798,-186 792,-180 792,-174 792,-174 792,-160 792,-160 792,-154 798,-148 804,-148 804,-148 939,-148 939,-148 945,-148 951,-154 951,-160 951,-160 951,-174 951,-174 951,-180 945,-186 939,-186"/>
<text text-anchor="middle" x="871.5" y="-170.8" font-family="Helvetica,sans-Serif" font-size="14.00">ChangeLog / Outbox</text>
<text text-anchor="middle" x="871.5" y="-155.8" font-family="Helvetica,sans-Serif" font-size="14.00">(append&#45;only ops)</text>
</g>
<!-- P1&#45;&gt;P3 -->
<g id="edge4" class="edge">
<title>P1&#45;&gt;P3</title>
<path fill="none" stroke="black" d="M648.31,-221.92C690.55,-211.72 743.46,-198.94 787.17,-188.38"/>
<polygon fill="black" stroke="black" points="788.02,-191.77 796.91,-186.02 786.37,-184.97 788.02,-191.77"/>
</g>
<!-- P4 -->
<g id="node9" class="node">
<title>P4</title>
<path fill="none" stroke="black" d="M524.5,-186C524.5,-186 440.5,-186 440.5,-186 434.5,-186 428.5,-180 428.5,-174 428.5,-174 428.5,-160 428.5,-160 428.5,-154 434.5,-148 440.5,-148 440.5,-148 524.5,-148 524.5,-148 530.5,-148 536.5,-154 536.5,-160 536.5,-160 536.5,-174 536.5,-174 536.5,-180 530.5,-186 524.5,-186"/>
<text text-anchor="middle" x="482.5" y="-170.8" font-family="Helvetica,sans-Serif" font-size="14.00">Local Cache /</text>
<text text-anchor="middle" x="482.5" y="-155.8" font-family="Helvetica,sans-Serif" font-size="14.00">Read Models</text>
</g>
<!-- P1&#45;&gt;P4 -->
<g id="edge5" class="edge">
<title>P1&#45;&gt;P4</title>
<path fill="none" stroke="black" d="M550.54,-221.83C539.33,-212.96 525.68,-202.16 513.56,-192.57"/>
<polygon fill="black" stroke="black" points="515.47,-189.62 505.46,-186.16 511.13,-195.11 515.47,-189.62"/>
</g>
<!-- Y5 -->
<g id="node10" class="node">
<title>Y5</title>
<path fill="none" stroke="black" d="M1089.5,-334C1089.5,-334 953.5,-334 953.5,-334 947.5,-334 941.5,-328 941.5,-322 941.5,-322 941.5,-308 941.5,-308 941.5,-302 947.5,-296 953.5,-296 953.5,-296 1089.5,-296 1089.5,-296 1095.5,-296 1101.5,-302 1101.5,-308 1101.5,-308 1101.5,-322 1101.5,-322 1101.5,-328 1095.5,-334 1089.5,-334"/>
<text text-anchor="middle" x="1021.5" y="-318.8" font-family="Helvetica,sans-Serif" font-size="14.00">Connectivity Monitor</text>
<text text-anchor="middle" x="1021.5" y="-303.8" font-family="Helvetica,sans-Serif" font-size="14.00">+ Scheduler</text>
</g>
<!-- Y1 -->
<g id="node11" class="node">
<title>Y1</title>
<path fill="none" stroke="black" d="M1081,-259C1081,-259 962,-259 962,-259 956,-259 950,-253 950,-247 950,-247 950,-235 950,-235 950,-229 956,-223 962,-223 962,-223 1081,-223 1081,-223 1087,-223 1093,-229 1093,-235 1093,-235 1093,-247 1093,-247 1093,-253 1087,-259 1081,-259"/>
<text text-anchor="middle" x="1021.5" y="-237.3" font-family="Helvetica,sans-Serif" font-size="14.00">Sync Orchestrator</text>
</g>
<!-- Y5&#45;&gt;Y1 -->
<g id="edge6" class="edge">
<title>Y5&#45;&gt;Y1</title>
<path fill="none" stroke="black" d="M1021.5,-295.83C1021.5,-287.89 1021.5,-278.41 1021.5,-269.63"/>
<polygon fill="black" stroke="black" points="1025,-269.42 1021.5,-259.42 1018,-269.42 1025,-269.42"/>
</g>
<!-- Y1&#45;&gt;P2 -->
<g id="edge10" class="edge">
<title>Y1&#45;&gt;P2</title>
<path fill="none" stroke="black" d="M939.55,-223.47C887.25,-212.92 819.13,-199.19 763.77,-188.02"/>
<polygon fill="black" stroke="black" points="939.19,-226.97 949.69,-225.52 940.57,-220.11 939.19,-226.97"/>
<polygon fill="black" stroke="black" points="764.44,-184.58 753.94,-186.04 763.05,-191.45 764.44,-184.58"/>
</g>
<!-- Y1&#45;&gt;P3 -->
<g id="edge11" class="edge">
<title>Y1&#45;&gt;P3</title>
<path fill="none" stroke="black" d="M976.69,-218.49C958.27,-209.65 936.95,-199.41 918.33,-190.48"/>
<polygon fill="black" stroke="black" points="975.42,-221.76 985.95,-222.94 978.45,-215.45 975.42,-221.76"/>
<polygon fill="black" stroke="black" points="919.68,-187.24 909.15,-186.07 916.65,-193.55 919.68,-187.24"/>
</g>
<!-- Y2 -->
<g id="node12" class="node">
<title>Y2</title>
<path fill="none" stroke="black" d="M1061.5,-185C1061.5,-185 981.5,-185 981.5,-185 975.5,-185 969.5,-179 969.5,-173 969.5,-173 969.5,-161 969.5,-161 969.5,-155 975.5,-149 981.5,-149 981.5,-149 1061.5,-149 1061.5,-149 1067.5,-149 1073.5,-155 1073.5,-161 1073.5,-161 1073.5,-173 1073.5,-173 1073.5,-179 1067.5,-185 1061.5,-185"/>
<text text-anchor="middle" x="1021.5" y="-163.3" font-family="Helvetica,sans-Serif" font-size="14.00">Diff &amp; Merge</text>
</g>
<!-- Y1&#45;&gt;Y2 -->
<g id="edge7" class="edge">
<title>Y1&#45;&gt;Y2</title>
<path fill="none" stroke="black" d="M1021.5,-222.94C1021.5,-214.81 1021.5,-204.88 1021.5,-195.7"/>
<polygon fill="black" stroke="black" points="1025,-195.44 1021.5,-185.44 1018,-195.44 1025,-195.44"/>
</g>
<!-- Y4 -->
<g id="node14" class="node">
<title>Y4</title>
<path fill="none" stroke="black" d="M1203.5,-186C1203.5,-186 1103.5,-186 1103.5,-186 1097.5,-186 1091.5,-180 1091.5,-174 1091.5,-174 1091.5,-160 1091.5,-160 1091.5,-154 1097.5,-148 1103.5,-148 1103.5,-148 1203.5,-148 1203.5,-148 1209.5,-148 1215.5,-154 1215.5,-160 1215.5,-160 1215.5,-174 1215.5,-174 1215.5,-180 1209.5,-186 1203.5,-186"/>
<text text-anchor="middle" x="1153.5" y="-170.8" font-family="Helvetica,sans-Serif" font-size="14.00">Idempotency +</text>
<text text-anchor="middle" x="1153.5" y="-155.8" font-family="Helvetica,sans-Serif" font-size="14.00">Retry/Backoff</text>
</g>
<!-- Y1&#45;&gt;Y4 -->
<g id="edge9" class="edge">
<title>Y1&#45;&gt;Y4</title>
<path fill="none" stroke="black" d="M1052.78,-222.94C1070.21,-213.43 1092.15,-201.46 1111.1,-191.12"/>
<polygon fill="black" stroke="black" points="1113.03,-194.06 1120.13,-186.2 1109.68,-187.92 1113.03,-194.06"/>
</g>
<!-- N2 -->
<g id="node15" class="node">
<title>N2</title>
<path fill="none" stroke="black" d="M1353,-185C1353,-185 1246,-185 1246,-185 1240,-185 1234,-179 1234,-173 1234,-173 1234,-161 1234,-161 1234,-155 1240,-149 1246,-149 1246,-149 1353,-149 1353,-149 1359,-149 1365,-155 1365,-161 1365,-161 1365,-173 1365,-173 1365,-179 1359,-185 1353,-185"/>
<text text-anchor="middle" x="1299.5" y="-163.3" font-family="Helvetica,sans-Serif" font-size="14.00">CRS API Adapter</text>
</g>
<!-- Y1&#45;&gt;N2 -->
<g id="edge12" class="edge">
<title>Y1&#45;&gt;N2</title>
<path fill="none" stroke="black" d="M1087.38,-222.94C1128.35,-212.33 1181.15,-198.65 1223.83,-187.6"/>
<polygon fill="black" stroke="black" points="1224.81,-190.96 1233.61,-185.07 1223.05,-184.18 1224.81,-190.96"/>
</g>
<!-- Y3 -->
<g id="node13" class="node">
<title>Y3</title>
<path fill="none" stroke="black" d="M1091.5,-112C1091.5,-112 951.5,-112 951.5,-112 945.5,-112 939.5,-106 939.5,-100 939.5,-100 939.5,-86 939.5,-86 939.5,-80 945.5,-74 951.5,-74 951.5,-74 1091.5,-74 1091.5,-74 1097.5,-74 1103.5,-80 1103.5,-86 1103.5,-86 1103.5,-100 1103.5,-100 1103.5,-106 1097.5,-112 1091.5,-112"/>
<text text-anchor="middle" x="1021.5" y="-96.8" font-family="Helvetica,sans-Serif" font-size="14.00">Conflict Resolver</text>
<text text-anchor="middle" x="1021.5" y="-81.8" font-family="Helvetica,sans-Serif" font-size="14.00">(Rules / User Prompt)</text>
</g>
<!-- Y2&#45;&gt;Y3 -->
<g id="edge8" class="edge">
<title>Y2&#45;&gt;Y3</title>
<path fill="none" stroke="black" d="M1021.5,-148.94C1021.5,-140.99 1021.5,-131.31 1021.5,-122.31"/>
<polygon fill="black" stroke="black" points="1025,-122.2 1021.5,-112.2 1018,-122.2 1025,-122.2"/>
</g>
<!-- N1 -->
<g id="node16" class="node">
<title>N1</title>
<path fill="none" stroke="black" d="M1358.5,-112C1358.5,-112 1240.5,-112 1240.5,-112 1234.5,-112 1228.5,-106 1228.5,-100 1228.5,-100 1228.5,-86 1228.5,-86 1228.5,-80 1234.5,-74 1240.5,-74 1240.5,-74 1358.5,-74 1358.5,-74 1364.5,-74 1370.5,-80 1370.5,-86 1370.5,-86 1370.5,-100 1370.5,-100 1370.5,-106 1364.5,-112 1358.5,-112"/>
<text text-anchor="middle" x="1299.5" y="-96.8" font-family="Helvetica,sans-Serif" font-size="14.00">HTTP Client</text>
<text text-anchor="middle" x="1299.5" y="-81.8" font-family="Helvetica,sans-Serif" font-size="14.00">(TLS/Cert Pinning)</text>
</g>
<!-- N2&#45;&gt;N1 -->
<g id="edge13" class="edge">
<title>N2&#45;&gt;N1</title>
<path fill="none" stroke="black" d="M1299.5,-148.94C1299.5,-140.99 1299.5,-131.31 1299.5,-122.31"/>
<polygon fill="black" stroke="black" points="1303,-122.2 1299.5,-112.2 1296,-122.2 1303,-122.2"/>
</g>
<!-- E1 -->
<g id="node22" class="node">
<title>E1</title>
<path fill="none" stroke="black" d="M1378,-38C1378,-38 1221,-38 1221,-38 1215,-38 1209,-32 1209,-26 1209,-26 1209,-12 1209,-12 1209,-6 1215,0 1221,0 1221,0 1378,0 1378,0 1384,0 1390,-6 1390,-12 1390,-12 1390,-26 1390,-26 1390,-32 1384,-38 1378,-38"/>
<text text-anchor="middle" x="1299.5" y="-22.8" font-family="Helvetica,sans-Serif" font-size="14.00">CRS API</text>
<text text-anchor="middle" x="1299.5" y="-7.8" font-family="Helvetica,sans-Serif" font-size="14.00">(Orders/Inventory/Seat)</text>
</g>
<!-- N1&#45;&gt;E1 -->
<g id="edge18" class="edge">
<title>N1&#45;&gt;E1</title>
<path fill="none" stroke="black" d="M1299.5,-63.57C1299.5,-58.68 1299.5,-53.59 1299.5,-48.69"/>
<polygon fill="black" stroke="black" points="1296,-63.83 1299.5,-73.83 1303,-63.83 1296,-63.83"/>
<polygon fill="black" stroke="black" points="1303,-48.41 1299.5,-38.41 1296,-48.41 1303,-48.41"/>
</g>
<!-- S2 -->
<g id="node17" class="node">
<title>S2</title>
<path fill="none" stroke="black" d="M1556,-186C1556,-186 1407,-186 1407,-186 1401,-186 1395,-180 1395,-174 1395,-174 1395,-160 1395,-160 1395,-154 1401,-148 1407,-148 1407,-148 1556,-148 1556,-148 1562,-148 1568,-154 1568,-160 1568,-160 1568,-174 1568,-174 1568,-180 1562,-186 1556,-186"/>
<text text-anchor="middle" x="1481.5" y="-170.8" font-family="Helvetica,sans-Serif" font-size="14.00">Auth Token Manager</text>
<text text-anchor="middle" x="1481.5" y="-155.8" font-family="Helvetica,sans-Serif" font-size="14.00">(Device/Session creds)</text>
</g>
<!-- S2&#45;&gt;N1 -->
<g id="edge14" class="edge">
<title>S2&#45;&gt;N1</title>
<path fill="none" stroke="black" d="M1435.57,-147.83C1410.91,-138.07 1380.33,-125.98 1354.41,-115.72"/>
<polygon fill="black" stroke="black" points="1355.68,-112.46 1345.1,-112.04 1353.11,-118.97 1355.68,-112.46"/>
</g>
<!-- E2 -->
<g id="node23" class="node">
<title>E2</title>
<path fill="none" stroke="black" d="M1584,-111C1584,-111 1401,-111 1401,-111 1395,-111 1389,-105 1389,-99 1389,-99 1389,-87 1389,-87 1389,-81 1395,-75 1401,-75 1401,-75 1584,-75 1584,-75 1590,-75 1596,-81 1596,-87 1596,-87 1596,-99 1596,-99 1596,-105 1590,-111 1584,-111"/>
<text text-anchor="middle" x="1492.5" y="-89.3" font-family="Helvetica,sans-Serif" font-size="14.00">Device Provisioning Service</text>
</g>
<!-- S2&#45;&gt;E2 -->
<g id="edge19" class="edge">
<title>S2&#45;&gt;E2</title>
<path fill="none" stroke="black" d="M1485.8,-137.82C1486.63,-132.4 1487.5,-126.72 1488.33,-121.32"/>
<polygon fill="black" stroke="black" points="1482.33,-137.42 1484.28,-147.83 1489.25,-138.47 1482.33,-137.42"/>
<polygon fill="black" stroke="black" points="1491.79,-121.83 1489.84,-111.42 1484.87,-120.77 1491.79,-121.83"/>
</g>
<!-- S1 -->
<g id="node18" class="node">
<title>S1</title>
<path fill="none" stroke="black" d="M1559.5,-260C1559.5,-260 1403.5,-260 1403.5,-260 1397.5,-260 1391.5,-254 1391.5,-248 1391.5,-248 1391.5,-234 1391.5,-234 1391.5,-228 1397.5,-222 1403.5,-222 1403.5,-222 1559.5,-222 1559.5,-222 1565.5,-222 1571.5,-228 1571.5,-234 1571.5,-234 1571.5,-248 1571.5,-248 1571.5,-254 1565.5,-260 1559.5,-260"/>
<text text-anchor="middle" x="1481.5" y="-244.8" font-family="Helvetica,sans-Serif" font-size="14.00">KeyStore Wrapper</text>
<text text-anchor="middle" x="1481.5" y="-229.8" font-family="Helvetica,sans-Serif" font-size="14.00">(Android/Java KeyStore)</text>
</g>
<!-- S1&#45;&gt;S2 -->
<g id="edge15" class="edge">
<title>S1&#45;&gt;S2</title>
<path fill="none" stroke="black" d="M1481.5,-221.83C1481.5,-214.13 1481.5,-204.97 1481.5,-196.42"/>
<polygon fill="black" stroke="black" points="1485,-196.41 1481.5,-186.41 1478,-196.41 1485,-196.41"/>
</g>
<!-- S3 -->
<g id="node19" class="node">
<title>S3</title>
<path fill="none" stroke="black" d="M561,-408C561,-408 414,-408 414,-408 408,-408 402,-402 402,-396 402,-396 402,-382 402,-382 402,-376 408,-370 414,-370 414,-370 561,-370 561,-370 567,-370 573,-376 573,-382 573,-382 573,-396 573,-396 573,-402 567,-408 561,-408"/>
<text text-anchor="middle" x="487.5" y="-392.8" font-family="Helvetica,sans-Serif" font-size="14.00">Access Control</text>
<text text-anchor="middle" x="487.5" y="-377.8" font-family="Helvetica,sans-Serif" font-size="14.00">(RBAC/Least&#45;Privilege)</text>
</g>
<!-- S3&#45;&gt;B1 -->
<g id="edge16" class="edge">
<title>S3&#45;&gt;B1</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M487.5,-369.83C487.5,-362.13 487.5,-352.97 487.5,-344.42"/>
<polygon fill="black" stroke="black" points="491,-344.41 487.5,-334.41 484,-344.41 491,-344.41"/>
</g>
<!-- S4 -->
<g id="node20" class="node">
<title>S4</title>
<path fill="none" stroke="black" d="M1231.5,-407C1231.5,-407 1149.5,-407 1149.5,-407 1143.5,-407 1137.5,-401 1137.5,-395 1137.5,-395 1137.5,-383 1137.5,-383 1137.5,-377 1143.5,-371 1149.5,-371 1149.5,-371 1231.5,-371 1231.5,-371 1237.5,-371 1243.5,-377 1243.5,-383 1243.5,-383 1243.5,-395 1243.5,-395 1243.5,-401 1237.5,-407 1231.5,-407"/>
<text text-anchor="middle" x="1190.5" y="-385.3" font-family="Helvetica,sans-Serif" font-size="14.00">Audit Logger</text>
</g>
<!-- E3 -->
<g id="node21" class="node">
<title>E3</title>
<path fill="none" stroke="black" d="M1249.5,-333C1249.5,-333 1131.5,-333 1131.5,-333 1125.5,-333 1119.5,-327 1119.5,-321 1119.5,-321 1119.5,-309 1119.5,-309 1119.5,-303 1125.5,-297 1131.5,-297 1131.5,-297 1249.5,-297 1249.5,-297 1255.5,-297 1261.5,-303 1261.5,-309 1261.5,-309 1261.5,-321 1261.5,-321 1261.5,-327 1255.5,-333 1249.5,-333"/>
<text text-anchor="middle" x="1190.5" y="-311.3" font-family="Helvetica,sans-Serif" font-size="14.00">Audit Trail Service</text>
</g>
<!-- S4&#45;&gt;E3 -->
<g id="edge17" class="edge">
<title>S4&#45;&gt;E3</title>
<path fill="none" stroke="black" d="M1190.5,-370.94C1190.5,-362.81 1190.5,-352.88 1190.5,-343.7"/>
<polygon fill="black" stroke="black" points="1194,-343.44 1190.5,-333.44 1187,-343.44 1194,-343.44"/>
</g>
</g>
</svg>

    </section>

    <section id="key">
      <h2>3. Key Architectural Components</h2>

      <h3>3.1 Core Domain Logic</h3>
      <p>This central module encapsulates business rules, entities, and use cases for order management, inventory, and seat assignments. It is platform-agnostic and implemented in pure Java to maximize reuse.</p>

      <h3>3.2 Local Data Store</h3>
      <p>An embedded database (e.g., SQLite for Android/Desktop, Realm for cross-platform) stores all application data locally to enable offline functionality. PII is encrypted at rest.</p>

      <h3>3.3 Synchronization Module</h3>
      <p>Manages data consistency between the local store and the CRS. The protocol provides:</p>
      <ul>
        <li><strong>Lossless Sync</strong>: All changes are eventually propagated to the CRS.</li>
        <li><strong>Idempotency</strong>: Safe retries prevent duplicates or incorrect state.</li>
        <li><strong>Conflict Resolution</strong>: Detects and resolves discrepancies via rules or user prompts.</li>
      </ul>

      <h3>3.4 Security Module</h3>
      <p>Enforces security policies, including:</p>
      <ul>
        <li><strong>Device Provisioning</strong>: Secure onboarding and authentication of crew devices.</li>
        <li><strong>Encryption</strong>: Key management and encryption/decryption of sensitive data at rest.</li>
        <li><strong>Access Control</strong>: Least-privilege roles for all operations.</li>
        <li><strong>Audit Trails</strong>: Logs critical actions and data access for compliance and forensics.</li>
      </ul>

      <h3>3.5 Platform-Specific UIs</h3>
      <p>Native UIs for Android (phones/tablets) and JavaFX (laptops), with an optional web interface (React Native Web or Vaadin). UIs consume the Core Domain API and present platform-idiomatic UX.</p>
    </section>

    <section id="flow">
      <h2>4. Data Flow and Interactions</h2>

      <h3>4.1 Offline Operations</h3>
      <p>While offline, the UI interacts with the Core Domain Logic, which reads/writes the local store. All validations (combos, substitutions) execute locally.</p>

      <h3>4.2 Online Operations &amp; Synchronization</h3>
      <p>When connectivity is available (e.g., on landing), the Sync Module pushes local changes to the CRS and pulls updates. After CRS acceptance, it emits a confirmation message to the passenger.</p>
    </section>

    <section id="stack">
      <h2>5. Technology Stack (Proposed)</h2>
      <ul>
        <li><strong>Core Logic</strong>: Java</li>
        <li><strong>Local Database</strong>: SQLite (Android), H2/SQLite (Desktop), Realm (cross‑platform)</li>
        <li><strong>Synchronization</strong>: Custom protocol over RESTful CRS APIs</li>
        <li><strong>Security</strong>: Android Keystore, Java KeyStore, standard crypto libraries</li>
        <li><strong>Mobile UI</strong>: Android (Kotlin/Java)</li>
        <li><strong>Desktop UI</strong>: JavaFX</li>
        <li><strong>Web UI (optional)</strong>: React Native Web or Vaadin</li>
      </ul>
    </section>

    <section id="security">
      <h2>6. Security Considerations</h2>
      <ul>
        <li><strong>Data Encryption</strong>: All PII and sensitive order data encrypted at rest.</li>
        <li><strong>Secure Communication</strong>: HTTPS + certificate validation for all CRS traffic.</li>
        <li><strong>Authentication &amp; Authorization</strong>: Robust device auth and role checks.</li>
        <li><strong>Regular Audits</strong>: Periodic security audits and penetration tests.</li>
      </ul>
    </section>

    <section id="offline">
      <h2>7. Offline‑First Strategy</h2>
      <ul>
        <li><strong>Local Data Storage</strong>: All data needed for order creation, modification, and validation available locally.</li>
        <li><strong>Conflict Resolution</strong>: Clear merge/last‑write‑wins strategies or user prompts during sync.</li>
        <li><strong>Background Sync</strong>: Non‑intrusive background synchronization.</li>
      </ul>
    </section>

    <section id="cross">
      <h2>8. Cross‑Platform Strategy</h2>
      <ul>
        <li><strong>Shared Core</strong>: Single codebase for business logic.</li>
        <li><strong>Native UIs</strong>: Platform‑specific UI tech for performance and UX.</li>
        <li><strong>API Layer</strong>: Well‑defined Core Domain API boundary for UIs.</li>
      </ul>
    </section>

    <footer class="muted small" style="margin-top: 28px;">
      <p>© Inflight Ordering Architecture. Inline SVG diagram; no external scripts.</p>
    </footer>
  </main>
</body>
</html>